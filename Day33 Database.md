<Day33 - 0503>
<Database 데이터베이스>

## 데이터와 데이터베이스, DBMS

🤍데이터베이스 - 데이터(data)와 베이스(base)의 합성어 - 효율적인 데이터 관리와 검색을 위한 구조화돤 데이터 집합

🤍DBMS - Database ManagementSystem의 약자로 '데이터베이스 관리 시스템'

🤍관계형 데이터베이스(RDBMS) - Oracle, MySql, MSSql, PostgreSql

(두가지의 개념에 대한 문제가 나올 것)

❤️ 데이터와 정보

1. 데이터
   - 어떤 필요에 의해 수집했지만 아직 특정 목적을 위해 평가하거나 정제하지 않은 값이나 사실 또는 자료 자체를 의미
   - 수집한 데이터
2. 정보
   - 수집한 데이터를 어떠한 목적을 위해 분석하거나 가공하여 가치를 추가하거나 새로운 의미를 이끌어 낼 수 있는 결과
   - 수집한 데이터 -> 가치판단 -> 정보

(두가지의 개념에 대한 문제가 나올 것)

❤️ 효율적인 데이터 관리를 위한 조건

1. 데이터를 통합하여 관리
2. 일관된 방법으로 관리 - 도메인 무결성 제약조건 : 자료형 (자료형을 일관되게 통일가능)
3. 데이터 누락 및 중복 제거 - 참조 무결성 제약조건
4. 여러 사용자가 공동으로 실시간 사용 가능
5. 효율적인 데이터 관리와 검색을 위한 구조화돤 데이터 집합

❤️ 파일 시스템과 DBMS

1. 파일 시스템을 통한 데이터 관리
2. DBMS를 통한 데이터 관리

❤️ 관계형 데이터 모델

1. Relational Data Model
   - 관계 : 테이블 간의 관계 - JOIN
2. 에드거 프랭크 커드(E. F. Codd)가 제안한모델
   - 관계 대수 - JOIN : SQL
3. 데이터 간 관계(relationship)에 초점

❤️ SQL이란

1. SQL은 Structured Query Language의 약자
2. SQL은 RDBMS에서 데이터를 다루고 관리하는 데 사용하는 데이터베이스 질의 언어
3. 종류

   1. DML (Data Manipulation Language) : 데이터 조작어(추가, 수정, 삭제 , 조회)
      INSERT : 추가
      UPDATE : 수정
      DELETE : 삭제

      - ★DQL(Data Query Language) : 데이터 조회어★
        SELETE : 조회

   2. DDL(Data Definition Language) : 데이터 정의어
      : 데이터의 틀을 정의하는 언어
      : CREATE [TABLE..]

   3. DCL(Data Control Language) : 테이터 제어어
      : 사용자 권한 : GRANT, REVOKE..

      - TCL(Transaction Control Language) : 트랜잭션제어어
        : 트랜잭션 : SQL 처리단위 : 트랜잭션이 종료 -> 데이터베이스 영구 반영
        : COMMIT : 트랜잭션 종료
        : ROLLBACK : 트랜잭션 종료 전에 데이터 복구

❤️ 관계형 데이터베이스의 구성 요소

1. 테이블★★★★★ (테이블에 관련된 문제가 나올 것. 단어 기억하기)

- 행 : 레코드, 튜플 ..
- 열 : 컬럼, 필드 ..
- 데이터를 2차원 표 형태로 저장하고 관리
- 이 표형태의 데이터 저장 공간을 테이블(table)이라고 합니다.
- 가로줄을 행(row), 세로줄을 열(column)이라고 부릅니다.

❤️ 특별한 의미를 지닌 열 🤍키🤍

- 조회 : 가장 중요한 기능
- 데이터를 구분할 수 있는 값 - 키
- 조회를 위해서는 데이터를 구분할 수 있는 대표하는 값

1. 기본키(Primary Key - PK)

   - 후보키 중에서 선택한 대표키
     (예) 주민번호

     // 복합키 - 하나의 값으로 레코드를 대표하기가 어려운 경우 여러값을 조합해서 기본키를 만드는 방식 (예) 회원명 + 주소 + 전화번호

2. 후보키

   - 레코드를 대표할 수 있는 값의 후보군

   회원명 주민번호 전화번호 주소
   이이름 111111 010-0000-0000 주소...

   주민번호
   전화번호
   회원명 + 주소 + 전화번호

3. 대리키

   - 기본키로 선택하기가 적합하지 않은 경우 증감번호 같은 형식으로 대리하는 키(기본키)
     (예) 회원번호, 게시글 번호..

4. 외래키(Foreign Key - FK)

   - 특정 테이블에 포함되어 있으면서 다른 테이블의 기본키로 지정된 키

   - 참조 무결성 제약조건★
     : 외래키가 있는 쪽이 자식 테이블
     : 부모 테이블에 있는 레코드를 참조하는 자식 레코드가 있으면 삭제가 불가함
   - 참조할 수 있는 키

   회원
   회원명 아이디
   이이름 user01
   김이름 user02

   게시글
   번호 제목 내용 회원명 아이디
   1 제목1 내용1 최이름 user01

   아이디 : 외래키

## 오라클 데이터베이스

❤️ 자료형 : 도메인 무결성 제약조건

🤍문자

- CHAR(문자의 길이) : 문자의 길이 만큼 바이트 공간이 생성(최대 4000byte까지 설정 가능 - 영문 기준 4000자까지)
  (참고)
  UTF-8 / 한글 1자 - 3바이트
  :CHAR(40) : 40 바이트만큼 고정 공간 할당
  문자가 AB : 2자로 입력해도 40바이트 공간을 고정으로 할당

- VARCHAR2(문자열 길이) : 최대 문자열 길이 만큼 바이트 공간 생성(문자열의 길이가 작으면 가변적으로 작게 생성)
  :VARCHAR2(40) : 문자열이 2자이면 2바이트 만큼만 할당
  가변적으로 공간 생성할 때는 VARCHAR2 사용
  (최대 4000byte 까지 할당 가능)
  보통 한줄 텍스트를 저장할 때 사용

- CLOB : Character Large OBject
  최대 4BG까지 저장 가능
  여러줄 텍스트를 저장할 때 주로 사용

🤍숫자

- NUMBER(전체 길이, 소수점 자릿수)

🤍기타

- DATE : 날짜, 시간
  날짜, 시간과 관련된 함수, 연산 기능 사용 가능, 형식화
- BLOB : 최대 크기 4GB의 대용량 이진 데이터 저장 가능
- BFILE : 최대 크기 4GB의 대용량 이진 데이터 파일을 저장 가능

(참고)
무결성 제약조건

1. 도메인 무결성 제약조건 : 자료형과 관련, 컬럼에는 지정된 자료형만 데이터 허용
2. 개체 무결성 제약조건 : 기본키 제약 조건(중복이 불가, NULL 미허용, 비어 있는 값도 미허용)
3. 참조 무결성 제약조건 : 외래키 제약 조건(데이터의 무결성을 유지하기 위해 부모 레코드에 자식레코드가 연결되어 있으면 삭제 제한. 외래키가 있는 쪽이 자식임)

❤️ 객체

- 객체는 오라클 데이터베이스 내에서 데이터를 저장하고 관리하기 위한 논리 구조를 가진 구성 요소

1. 테이블(table)
2. 인덱스(index)
   - 목차
   - 검색에 최적회 된 구조로 구성
3. 뷰(view)
   - 가상의 테이블
4. 시퀀스(sequence)
   - 숫자의 증감
5. 프로시저(procedure)
   - 저장 프로그램, 독립적인 함수 프로그램
   - 절차에 관련된 프로그램
   - 반환값이 없음
6. 함수(function)
   - 반환값 O
7. 패키지(package)
   - 비슷한 함수, 프로시저의 묶음
8. 트리거(trigger)
   - 특정 동작 발생 시 실행되는 함수
   - INSERT, DELETE, UPDATE

❤️ PL/SQL

- 기존 SQL만으로 이를 구현하는 것은 다소 한계가 있음
- 그래서 오라클 데이터베이스는 데이터 관리를 위해 별도의 프로그래밍 언어를 제공하는데, 이를 PL/SQL(Procedural Language extension to SQL)이라고 함
- 오라클 데이터베이스 프로그래밍이라고 하면 SQL문과 PL/SQL을 사용하여 프로그램울 제작하는 것을 의미함
- 변수, 조건문, 반복문 등을 사용할 수 있음

## 데이터베이스 설치

❤️docker 설치

loliconneko/oracle-ee-11g

docker pull loliconneko/oracle-ee-11g

docker images

docker ren -d --name oracle11g -p 1521:1521 loliconneko/oracle-ee-11g:latest

docker ps -a

docker exec -it oracle11g /bin/bash

sqlplus system/oracle

-d : 백그라운드에서 실행
-p : PC 포트 : 컨테이너 포트
-name : 별칭
-e 이름=값

(예) -p 1522:1521

오라클
1521:기본 포트

sqlplus 사용자명/비밀번호

최고 관리자 : system

사용자명 : 대소문자 구분 X

최고 관리자 : system / oracle

컨테이너 내부 터미널 접속
docker exec -it 컨테이너 이름 /bin/bash

SQL Developer - 오라클 공식 GUI 툴 / 자바 빌드 버전 JDK 11

dbeaver

비번 : oracle

연습용 스키마
scott / tiger

docker exec -it oracle11g /bin/bash

sqlplus system/oracle

ALTER USER SCOTT IDENTIFIED By tiger ACCOUNT UNLOCK;

CONN 계정명/비밀번호
