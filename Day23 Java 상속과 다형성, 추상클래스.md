<Day23 - 0419>
<JAVA 상속과 다형성, 추상클래스>

# 상속

❤️ 상속

1. 상속이란?

- 무엇인가를 물려받는다는 의미
- 자바의 상속은 기존의 클래스를 재사용하여 새로운 클래스를 작성하는 것

2. 상속의 장점? - 상속을 통해 클래스를 작성하면 코드의 재사용성을 높이고 중복을 제거하여 프로그램의 생산성과 유지보수에 용이함

3. 상속을 받으면 상위클래스의 자원을 왜 하위클래스가 사용할 수 있나?

- 하위클래스가 가장 큰 범위이고, 하위클래스가 상위 클래스를 포함하고 있기 때문에 그 자원을 사용할 수 있는 것임

4. 상속을 구현하는 방법? - extends 사용
   class Child extends Parents {}
   하위클래스에서 더 구체적인 클래스가 구현됨

5. 상속에서의 용어 정리 = 상속해주는 클래스를 상위클래스, 상속을 받는 클래스를 하위클래스라고 함. 하위클래스가 상위클래스를 상속받는다.

부모클래스, 상위클래스, 조상클래스 => 같은 뜻
자식클래스, 하위클래스, 자손클래스 => 같은 뜻

상속관계에서는 상위클래스가 하위클래스보다 일반적인 개념이고, 하위클래스는 상위클래스보다 구체적인 클래스가 됨

6. 상위클래스와 하위클래스의 관계

- 하위클래스는 상위클래스의 모든 멤버를 (멤버변수, 멤버함수) 상속받기 때문에, 하위클래스는 상위클래스의 모든 멤버를 포함
- 상위클래스에 age라는 멤버변수를 추가하면 하위클래스는 자동적으로 age라는 멤버변수가 추가된 것 같은 효과를 얻음
- 반대로 하위클래스에 멤버면수를 추가하면 상위클래스는 영향을 받지 않음
- 상위클래스가 변경되면 하위클래스는 자동적으로 영향을 받게 되지만, 하위클래스가 변경되는 것은 상위클래스에 아무런 영향을 주지 못한다.
- 하위클래스는 상위클래스의 모든 멤버(변수, 함수)를 상속받으므로 항상 상위클래스보다 같거나 많은 멤버를 가지게 된다.

parent 클래스를 상속받는 각각의 child1, child2 클래스가 있다고 가정했을 때, child1 클래스와 child2 클래스 서로간에는 아무런 관련이 없음
child1과 child2에 공통적으로 추가해야 하는 멤버가 있다면 이들을 각각 추가하기보다는 공통 조상인 parent 클래스에 추가하는 것이 좋음

- 참고 > 상속을 받는 자식은 하나의 부모에 여러개 생성할 수 있으나 부모는 여러개를 상속할 수 없음. 하나의 부모만 가능하다.

❤️ 클래스 생성과 자원 사용

- 하위 클래스가 생성될 때는 상위 클래스의 생성자가 먼저 호출됨
  (하위클래스가 상위클래스의 변수를 사용하기 위해서는 상위클래스의 변수가 이미 존재해야하기 때문)
  (상위 클래스의 변수가 메모리에서 먼저 생성이 되기 때문에 하위 클래스에서도 이 값들을 모두 사용할 수 있는 것임 )

❤️ 상위 클래스로 묵시적 클래스 형 변환

- 모든 하위 클래스는 상위 클래스 자료형으로 형변환 될 수 있지만 그 역은 성립하지 않음
- 상위 클래스가 하위 클래스의 모든 기능을 다 가지고 있는 것은 아니기 때문임

❤️ super()

하위 클래스에서 상위 클래스로 접근할 때 사용

1. 구분과 참조변수의 용도

- 상속받은 멤버와 자신의 멤버가 이름이 같을 때 구별해야 하는 상황 발생 시 상속받은 상위 멤버에 super를 붙여 구별하는 용도
- 상위 클래스에 선언된 멤버 변수나 메서드를 하위 클래스에서 참조할 때도 super를 사용
- this와 기능이 같으나 다만 대상이 상위클래스임. 상위클래스의 인스턴스 주소를 가리킴
- 인스턴스와 관련이 없는 statc 메서드는 this를 사용할 수 없는데, this와 마찬가지로 super도 static 메서드에서는 사용할 수 없고 인스턴스 메서드에서만 사용할 수 있음

2. 상위클래스의 생성자 호출

- 상위클래스의 생성자를 호출하는데 사용
- 컴파일러는 자동으로 super();를 생성자의 첫줄에 삽입함
- 상위클래스의 멤버변수는 상위클래스의 생성자에 의해 초기화 되도록 하기 위함

❤️ 오버라이딩

1. 오버라이딩이란?

- 상위클래스로부터 상속받은 '메서드의 내용을 변경하는 것'을 오버라이딩이라고 함
  상속을 받은 메서드를 그대로 사용하기도 하지만, 하위클래스 자신에게 맞게 변경해야 하는 경우에 오버라이딩을 사용
  상위클래스에 정의한 메서드가 하위클래스에서 구현할 내용과 맞지 않을 경우 하위클래스에서 이 메서드를 재정의할 수 있음
  상속 시에만 가능하고 객체가 될 수 있는 인스턴스 메서드에서만 가능함
  하위클래스에 상위클래스와 동일한 메서드가 있으면, 하위클래스의 메서드가 우선이 되는 것을 이용

2. 오버라이딩의 조건?

- 오버라이딩은 메서드의 내용만을 새로 작성하는 것이므로 메서드의 선언부는 상위클래스의 것과 완전히 일치해야 함

* 다음과 같은 조건 성립 필요

- 오버라이딩을 하려면 반환형, 메서드 이름, 매개 변수, 매개변수 자료형이 반드시 같아야 함
- 그렇지 않다면 재정의한 메서드를 기존 메서드와 다른 메서드로 인식하여 오버라이딩 되지 않음

① 메서드 이름이 같아야 한다.
② 매개변수가 같아야 한다.
③ 반환타입이 같아야 한다.

- 참고 > 접근제어자는 변경할 수 있지만 부모클래스의 메서드보다 좁은 범위로는 변경할 수 없다. 부모클래스의 접근제어자가 private 일때는 참초를 위해 protected나 public 등으로 변경
  private와 비슷하게 사용하고 싶을 때는 protected 사용

3. 오버로딩과 오버라이딩 구분
   오버로딩 - 기존에 없는 새로운 메서드를 정의하는 것 (생성자에서도 등장)
   오버라이딩 - 상속받은 메서드의 내용을 변경하는 것 (상속에서 등장)

❤️ 애너테이션

- 애너테이션(Annotation)의 뜻 : 주석, 주해
- 형식 : @이름
- 정보전달의 목적
- @Override : 재정의된 메서드임을 컴파일러에게 알려주는 정보

❤️ 가상메서드

- 같은 객체의 인스턴스를 여러 개 생성한다고 해서 메서드도 여러 개 생성되지 않음
- 메서드의 명령 집합은 메서드 영역(코드 영역)에 위치함
- 우리가 메서드를 호출하면 메서드 영역의 주소를 참조하여 명령이 실행되므로 인스턴스가 달라도 동일한 메서드가 호출됨
- 일반적으로 프로그램에서 메서드를 호출한다는 것은 그 메서드의 명령 집합이 있는 메모리 위치를 참조하여 명령을 실행하는 것임

❤️ 가상메서드의 원리

- 가상메서드의 경우에는 가상 메서드 테이블이 만들어짐
- 가상메서드 테이블은 각 메서드 이름과 실제 메모리 주소가 짝을 이루고 있음
- 어떤 메서드가 호출되면 이 테이블에서 주소 값을 찾아서 해당 메서드의 명령을 수행

# 다형성 ★★★★★

❤️ 다형성

- 하위클래스의 객체가 상위 클래스의 자료형으로 자동 형변환 되는 것
- 하나의 코드가 여러 자료형으로 구현되어 실행되는 것
- 접근 가능한 자원은 명확하지만 자신의 메모리만큼 한정되어있음

❤️ 다형성의 장점

- 상위 클래스에서 공통 부분의 메서드를 제공하고, 하위 클래스에서는 그에 기반한 추가 요소를 덧붙여 구현하면 코드 양도 줄어들고 유지보수도 편리함
- 필요에 따라 상속받은 모든 클래스를 하나의 상위 클래스로 처리할 수 있고 다형성에 의해 각 클래스의 여러 가지 구현을 실행 할 수 있으므로 프로그램을 쉽게 확장할 수 있음

❤️ 다운캐스팅과 instanceof (하위 클래스로 형 변환을 하는 다운캐스팅)

- 하위클래스에 더 많은 메서드가 구현되어 있고 다양한 멤버변수가 있다고 하더라도 자료형이 상위클래스형이라면 사용할 수 없음
- 따라서 필요에 따라 다시 원래 인스턴스의 자료형으로 되돌아가야 하는 경우가 있고, 이렇게 상위 클래스로 형 변환 되었던 하위 클래스를 다시 원래 자료형으로 형 변환하는 것을 다운 캐스팅(down casting)이라고 함

## instanceof 연산자 : 생성된 객체의 출처를 체크해보는 연산자

- instance: 실체 - 실제로 존재한다
- 클래스라고 하는 객체의 정의 (존재X) -> new -> 힙 공간에 실제로 존재 : 생성된 객체 (인스턴스는 생성된 객체)
- 생성의 과정을 거쳐서 만들어진 객체가 인스턴스
- 인스턴스 == 객체 (자바에서는 생성된 객체니까)

- c instanceof C : c라고 하는 참조변수가 가리키는 객체의 출처가 C클래스로부터 만든 객체인가? (객체의 포함관계)
- 왼쪽에 있는 변수의 원래 인스턴스형이 오른쪽 클래스 자료형인가를 확인함
- 상위 클래스로는 묵시적으로 형 변환이 되지만, 하위 클래스로 형 변환을 할 때는 명시적으로 해야 함
- 자동으로 형변환이 되지 않아 문제가 되기 때문에 출처를 체크하는 목적으로 사용

(참고)

- 자바스크립트의 instanceof : 프로토타입 체인을 체크
- 상위클래스 : 일반적인 개념 (Animal 클래스 : 동물)
- 하위클래스 : 구체적인 개념 (Human 클래스, Bird 클래스, Tiger 클래스)

# 추상클래스

- 추상적: 어떤 일을 해야할지 결정 X - 정해지지 않은, 공통적인
- 구체적: 어떤 일을 해야할지 명확하게 정의

❤️ 추상클래스란?

- 구성 요소 중에서 정해지지 않은 클래스 / 함수의 기능이 아직 정의되지 않은 상태
- 함수의 정의만 되어있음 (구현 코드가 없음)
- 구현코드가 없다는 것은 함수 몸체(body)가 없다는 뜻
- 추상클래스가 객체가 되지 않는 이유는 구현 내용이 정확하지 않기 때문임
- Imeplement를 활용해 내용을 명확하게 정의해주면 객체가 됨
- 객체생성 되어야지만 적용이 가능함
- 반드시 하위클래스가 상속을 하고 그 내용을 정확하게 구현해야 함
- 상속을 위해 만드는 클래스

❤️ 추상클래스의 목적?

- 설계와 공통기능 정의하는 목적
- 생성해서 사용할 목적이 아닌 상속만을 위해 만듦
- 이 경우에 new 예약어로 인스턴스를 생성할 수 없음 (모든 메서드가 구현되지 않았으므로 인스턴스로 생성할 수 없음)★★★

❤️ 추상클래스 문법

- 추상 클래스는 항상 추상 메서드를 포함함★
- 추상클래스에는 추상메서드와 구현된 메서드가 함께 사용 될 수 있음
- 추상 메서드는 구현 코드가 없음★
- 추상 메서드는 abstract 예약어를 사용함★
- 구현된 메서드는 하위 클래스에서도 사용할 즉, 하위 클래스에서도 구현 내용을 공유할 메서드를 구현함

★ 구현된 메서드 : 하위 클래스에서 공통으로 사용할 구현 코드, 하위 클래스에서 재정의할 수도 있음

★ 추상 메서드 : 하위 클래스가 어떤 클래스냐에 따라 구현 코드가 달라짐

- abstract class명
- public abstract add(int num1, num2);
- 추상클래스, 추상메서드임을 알리기 위해 abstract 키워드를 씀

```Java

abstract class 클래스명 {}

	public abstract add(int num1, num2);

```

(참고)
interface (설계의 틀)

API(Application Programming Interface)

JDBC API
(Java DataBase Connectivity)

# 추상메서드

- 추상메서드의 역할 : 하위 클래스가 따라야 할 설계 원칙
- 하위 클래스가 공유해야 할 공통적인 자원 정의 가능
- ** 자바에서 추상메서드는 abstract 예약어를 사용하여 선언만 하는 메서드임 **
- 추상 클래스를 상속받은 하위 클래스는 구현되지 않은 추상 메서드를 모두 구현해야 구체적인 클래스가 됨 (하나라도 구현하지 않으면 추상클래스)

- 💛💛💛 그러므로 하위 클래스가 공유해야 할 공통적인 자원은 구현된 메서드로 정의하고, 하위 클래스마다 다르게 구현할 메서드는 추상 메서드로 선언함 💛💛💛

  (참고)

- 상속은 객체가 되어야만 가능하니까 인스턴스 메서드만 가능 / 추상메서드는 NO

- 추상적인 것의 뜻은 두가지. 정해지지 않은 것과 공통적인 것

# 인터페이스 / 추상메서드 / 추상클래스

❤️ 인터페이스

- 설계 (설계의 틀을 제공, 설계가 목적)
- 목적이 명확하므로 자동으로 추상메서드 생성

❤️ 추상메서드

- 설계 규제, 틀 (설계의 원칙 제공, 공통적인 자원 정의)

❤️ 추상클래스

- 추상메서드와 공통메서드(인스턴스메서드)를 정의한 클래스
- 추상메서드(설계)
- 공통메서드(인스턴스 메서드) : 하위 클래스가 공유할 자원
- 목적이 두가지이므로 abstract로 추상메서드임을 명시
- 공통적인 자원을 정의하는 목적으로 더 많이 사용함
